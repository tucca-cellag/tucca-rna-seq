name: renv_restore_env
channels:
  - conda-forge
  - bioconda
  - nodefaults
dependencies:
  - conda-forge::r-base =4.4
  - conda-forge::r-renv =1.1
  # --- System-level dependencies for R packages ---
  #
  # This section lists system libraries required to compile R packages from
  # source during `renv::restore()`. `renv` will helpfully list missing
  # Debian/Ubuntu packages (e.g., `libcurl4-openssl-dev`) if installation fails.
  #
  # To maintain this:
  # 1. If `renv::restore()` fails, check the log for missing system packages.
  # 2. Find the corresponding conda package (usually on the `conda-forge` channel).
  #    - `libcurl4-openssl-dev` -> `libcurl`
  #    - `libssl-dev`          -> `openssl`
  #    - `libxml2-dev`         -> `libxml2`
  #    - `libpng-dev`          -> `libpng`
  #    - `zlib1g-dev`          -> `zlib`
  # 3. Add the conda package to this list.
  #
  # This explicit list ensures the workflow is reproducible and does not
  # require sudo access for end-users.
  - conda-forge::make
  - conda-forge::pandoc
  - conda-forge::pkg-config
  - conda-forge::libcurl
  - conda-forge::openssl
  - conda-forge::libxml2
  - conda-forge::fontconfig
  - conda-forge::freetype
  - conda-forge::libpng
  - conda-forge::libgit2
  - conda-forge::glpk
  - conda-forge::icu
  - conda-forge::xorg-libx11
  - conda-forge::zlib
